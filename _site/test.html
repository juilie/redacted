<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <style>
    body { margin: 0; display: grid; place-items: center; height: 100vh; background: #111; }
    canvas {
      width: 100vw;
      height: auto;
      filter: url(#staticDisplace);
    }
    video { display:none; } /* keep it hidden; it's only the frame source */
  </style>
</head>
<body>

  <svg width="0" height="0" style="position:absolute; left:-9999px;">
    <filter id="staticDisplace" x="-20%" y="-20%" width="140%" height="140%">
      <feTurbulence type="fractalNoise" baseFrequency="0.012" numOctaves="2" seed="2" result="noise"/>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="30"
                         xChannelSelector="R" yChannelSelector="G"/>
    </filter>
  </svg>

  <video id="v" autoplay muted loop playsinline src="/static/videos/mirror.mp4"></video>
  <canvas id="c"></canvas>

  <script>
    const v = document.getElementById('v');
    const c = document.getElementById('c');
    const ctx = c.getContext('2d');

    function resizeToVideo() {
      // set canvas *pixel* size to match the videoâ€™s native size
      const w = v.videoWidth || 640;
      const h = v.videoHeight || 360;
      if (c.width !== w || c.height !== h) { c.width = w; c.height = h; }
    }

    function tick() {
      if (v.readyState >= 2) { // HAVE_CURRENT_DATA
        resizeToVideo();
        ctx.drawImage(v, 0, 0, c.width, c.height);
      }
      requestAnimationFrame(tick);
    }

    v.addEventListener('play', () => requestAnimationFrame(tick));
    v.addEventListener('loadedmetadata', () => {
      resizeToVideo();
      // Some browsers need an explicit play() call even with autoplay.
      v.play().catch(() => {
        // If autoplay is blocked, user interaction will be needed.
        // (Keep this silent; add a click-to-play UI if you want.)
      });
    });
  </script>

</body>
</html>

    <!-- <svg width="2500" height="2500">
  
        <filter id='noise' x='0%' y='0%' width='100%' height='100%'>
            <feTurbulence baseFrequency="0.008" type="turbulence" />
      </filter>
      
        
        <rect x="0" y="0" width="100%" height="100%" filter="url(#noise)" fill="none"></rect>
          
    </svg> -->
